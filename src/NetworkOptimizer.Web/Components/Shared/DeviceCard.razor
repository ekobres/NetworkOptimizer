@if (Device != null)
{
    <div class="device-card device-@Device.Status.ToLower()">
        <div class="device-header">
            <div class="device-icon">
                @{
                    var imagePath = GetDeviceImagePath(Device.Model);
                }
                @if (!string.IsNullOrEmpty(imagePath))
                {
                    <img src="@imagePath" alt="@Device.Model" class="device-image" />
                }
                else
                {
                    <span class="device-emoji">@GetDeviceIcon(Device.Type)</span>
                }
            </div>
            <div class="device-info">
                <h4 class="device-name">@Device.Name</h4>
                <p class="device-type">@Device.Type</p>
            </div>
            <div class="device-status">
                <span class="status-dot"></span>
                <span class="status-text">@Device.Status</span>
            </div>
        </div>
        <div class="device-body">
            <div class="device-detail">
                <span class="detail-label">IP Address:</span>
                <span class="detail-value">@Device.IpAddress</span>
            </div>
            @if (!string.IsNullOrEmpty(Device.Model))
            {
                <div class="device-detail">
                    <span class="detail-label">Model:</span>
                    <span class="detail-value">@Device.Model</span>
                </div>
            }
            @if (!string.IsNullOrEmpty(Device.Uptime))
            {
                <div class="device-detail">
                    <span class="detail-label">Uptime:</span>
                    <span class="detail-value">@Device.Uptime</span>
                </div>
            }
            @if (Device.ClientCount.HasValue)
            {
                <div class="device-detail">
                    <span class="detail-label">Clients:</span>
                    <span class="detail-value">@Device.ClientCount</span>
                </div>
            }
        </div>
    </div>
}

<style>
    .device-image {
        width: 48px;
        height: 48px;
        object-fit: contain;
    }

    .device-emoji {
        font-size: 2rem;
    }
</style>

@using NetworkOptimizer.Web.Services

@code {
    [Parameter]
    public DeviceInfo? Device { get; set; }

    private string? GetDeviceImagePath(string? model)
    {
        if (string.IsNullOrEmpty(model))
            return null;

        // Map friendly model names to image filenames
        var imageFile = model switch
        {
            "UCG-Fiber" => "ucg-fiber.png",
            "U5G-Max" => "u5g-max.png",
            "USW-Pro-XG-8-PoE" => "usw-pro-xg-8-poe.png",
            "USW-Lite-8-PoE" => "usw-lite-8-poe.png",
            "USW-Flex-Mini" => "usw-flex-mini.png",
            "U7-Pro-Wall" => "u7-pro-wall.png",
            "U7-Pro-XGS-B" => "u7-pro-xgs-b.png",
            "U7-Pro-Outdoor" => "u7-pro-outdoor.png",
            "U7-Outdoor" => "u7-outdoor.png",
            _ => null
        };

        return imageFile != null ? $"/images/devices/{imageFile}" : null;
    }

    private string GetDeviceIcon(string deviceType)
    {
        return deviceType.ToLower() switch
        {
            "gateway" => "üåê",
            "switch" => "üîå",
            "access point" => "üì°",
            "ap" => "üì°",
            "camera" => "üìπ",
            "cellular modem" => "üì∂",
            _ => "üñ•Ô∏è"
        };
    }
}
