# Network Optimizer Environment Configuration
# Copy this file to .env and update with your values

# ===== Port Configuration =====
# Blazor Web UI port
WEB_PORT=8042

# ===== Timezone Configuration =====
# Common US timezones:
#   America/New_York (Eastern), America/Chicago (Central),
#   America/Denver (Mountain), America/Los_Angeles (Pacific)
# Other examples:
#   Europe/London, Europe/Paris, Asia/Tokyo, Australia/Sydney
TZ=America/New_York

# ===== Application Password =====
# Password precedence: Database (Settings UI) > APP_PASSWORD env var > Auto-generated
#
# On first run, an auto-generated password is shown in the logs.
# You can then set a permanent password in Settings > Admin Password (recommended).
# APP_PASSWORD is a fallback - useful for Docker deployments where you want
# to set the password before the first login.
# APP_PASSWORD=your_secure_password

# ===== Network Optimizer Application Settings =====
# UniFi Controller URL (optional, can be configured via web UI)
# UNIFI_CONTROLLER_URL=https://192.168.1.1

# UniFi Controller credentials (optional, can be configured via web UI)
# UNIFI_USERNAME=
# UNIFI_PASSWORD=

# ===== Host Identity & Canonical URL Enforcement =====
# These settings identify the server and enforce a canonical URL via 302 redirect.
# Priority: REVERSE_PROXIED_HOST_NAME > HOST_NAME > HOST_IP
# If none set, app accepts any Host header.

# HOST_IP: Server's IP address
#   - Used for: Speed test path analysis, CORS, canonical URL (if no hostname set)
#   - Required for: Path analysis when server IP can't be auto-detected (bridge networking)
#   - Note: NOT required for basic app operationâ€”only for speed test features
# HOST_IP=192.168.1.100

# HOST_NAME: Server's hostname (recommended for better UX)
#   - Used for: Canonical URL enforcement, user-facing URLs, OpenSpeedTest link in UI
#   - Requires: DNS resolution by clients (can be local DNS via router/Pi-hole)
#   - Examples: nas, server.local, optimizer.home.arpa
# HOST_NAME=nas

# REVERSE_PROXIED_HOST_NAME: Hostname when behind a reverse proxy
#   - Used for: Canonical URL (https, no port), API URL for OpenSpeedTest result reporting
#   - Set to: The hostname your reverse proxy serves (internal or public)
#   - Note: OpenSpeedTest container is still accessed via HOST_NAME/HOST_IP:3005
# REVERSE_PROXIED_HOST_NAME=optimizer.example.com

# ===== Client Speed Testing =====
# Browser-based: OpenSpeedTest runs on port 3005 (configurable), results auto-reported if HOST_IP/HOST_NAME set
#   To disable: comment out the openspeedtest service in docker-compose.yml
# CLI-based: Enable iperf3 server mode for testing from devices with iperf3 installed

# Enable iperf3 server (listens on port 5201)
# IPERF3_SERVER_ENABLED=true

# Override OpenSpeedTest result URL (advanced - normally auto-constructed from above)
# OPENSPEEDTEST_SAVE_URL=http://192.168.1.100:8042/api/speedtest/results?

# OpenSpeedTest external port (default 3005)
#   - Used for: Docker port mapping, UI display, CORS, and host enforcement redirects
#   - Change if: Port 3005 conflicts with another service
# OPENSPEEDTEST_PORT=3005

# ===== Advanced Settings =====
# Log levels: Trace, Debug, Information, Warning, Error, Critical
# LOG_LEVEL=Information       # General (framework, EF Core, etc.)
# APP_LOG_LEVEL=Debug         # Network Optimizer application

# Agent authentication token (auto-generated if not set)
# AGENT_AUTH_TOKEN=

# ===== Future: InfluxDB/Grafana (Not Yet Implemented) =====
# These settings are reserved for future time-series metrics support.
# Uncomment when the feature is available.

# INFLUXDB_PORT=8086
# INFLUXDB_USERNAME=admin
# INFLUXDB_PASSWORD=changeme_influxdb_password
# INFLUXDB_TOKEN=changeme_influxdb_token
# INFLUXDB_ORG=network-optimizer
# INFLUXDB_BUCKET=network_optimizer
# INFLUXDB_RETENTION=30d

# GRAFANA_PORT=3000
# GRAFANA_USERNAME=admin
# GRAFANA_PASSWORD=changeme_grafana_password
